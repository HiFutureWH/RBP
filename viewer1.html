<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mol* Viewer</title>

  <!-- Mol* 运行时代码 -->
  <script src="https://unpkg.com/molstar/build/viewer/molstar.js"></script>
  <link  href="https://unpkg.com/molstar/build/viewer/molstar.css" rel="stylesheet"/>

  <style>
    html,body{margin:0;height:100%}
    #app{width:100%;height:100%}
  </style>
</head>

<body>
  <div id="app"></div>

  <script>
    /* ★ 只有小写 m 才存在 ★ */
    const viewer = new molstar.Viewer('app', {
      layoutShowControls: true,
      collapseLeftPanel: true
    });

    function load(url){
      viewer.loadStructureFromUrl(url, 'mmcif', false);
    }

    /* 支持 ?url=... 直接加载 */
    const qs = new URLSearchParams(location.search).get('url');
    if (qs) load(qs);

    /* 支持父页面 postMessage 动态切换 */
    window.addEventListener('message', ev => {
      if (typeof ev.data === 'string') load(ev.data);
    });
  </script>
</body>
</html>
